(()=>{var e={};e.id=847,e.ids=[847],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9696:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>k,routeModule:()=>x,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>h});var t={};r.r(t),r.d(t,{POST:()=>l});var o=r(96559),n=r(48088),i=r(37719),a=r(32190),u=r(12518),p=r(85663),c=r(43205),d=r.n(c);async function l(e){let{name:s,email:r,password:t}=await e.json(),o=new u.MongoClient("mongodb+srv://aditivyasw:ZxE67PES9RTUJQEF@cinebook.9dfgnar.mongodb.net/");try{await o.connect();let e=o.db("cinebook").collection("Users"),n=await e.findOne({email:r});if(n){if(n.googleId||n.facebookId)return a.NextResponse.json({success:!1,message:"User already exists with Google or Facebook account. Please sign in using those methods."},{status:409});return a.NextResponse.json({success:!1,message:"User already exists"},{status:409})}let i=await p.Ay.hash(t,10),u=await e.insertOne({name:s,email:r,password:i}),c=d().sign({id:u.insertedId,name:s,email:r},"cinebook_secret_key",{expiresIn:"7d"});return a.NextResponse.json({success:!0,user:{id:u.insertedId,name:s,email:r},token:c})}catch(e){return console.error("SignUp error:",e),a.NextResponse.json({success:!1,message:"Server error"},{status:500})}finally{await o.close()}}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/Auth/signUp/route",pathname:"/api/Auth/signUp",filename:"route",bundlePath:"app/api/Auth/signUp/route"},resolvedPagePath:"C:\\Users\\Lenovo\\Desktop\\cinebook\\app\\api\\Auth\\signUp\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:g,workUnitAsyncStorage:h,serverHooks:m}=x;function k(){return(0,i.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:h})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},96487:()=>{}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,580,205,663],()=>r(9696));module.exports=t})();